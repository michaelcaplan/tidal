enum ActionKind {
    Walking,
    Idle,
    Jumping,
    Intro
}
namespace SpriteKind {
    export const Splash = SpriteKind.create()
    export const benchBar = SpriteKind.create()
}



let splashTitleAnimation: animation.Animation = null
let splashTitle: Sprite = null
let splashTidal: Sprite = null
let gameSelectorSprite: miniMenu.MenuSprite = null
let playerSelectorName: TextSprite = null
let playerSelectorTitle: TextSprite = null
let winMessage = ""
let playerSelectorSprite: Sprite = null
let benchHudAction: TextSprite = null
let benchHudWeight: TextSprite = null
let benchHudLevel: TextSprite = null
let benchRightArmSprite: Sprite = null
let benchLeftArmSprite: Sprite = null
let splashStart: TextSprite = null
let playerSelectorCurrent = 0
let gameSelected = ""
let benchBarSprite: Sprite = null
let benchBarBottom = 0
let benchMaxTilt = 0
let benchTilt = 0
let benchBarMidBottom = 0
let benchBarMidTop = 0
let benchGravity = 0
let benchPlayerSprite: Sprite = null
let benchBarTop = 0
let benchStatusBar: StatusBarSprite = null
let benchState = ""
let benchLevel = 0
let benchCurrentWeight = 0
let benchBarHeight = 0
let benchGameLoopHealthLast = 0
let benchGameLoopHealthCurrent = 0
let benchGameLoopLast = 0
let benchGameLoopCurrent = 0
let benchRightSprite: Sprite = null
let benchLeftSprite: Sprite = null
let playersNames: string[] = []
let playersSprites: Image[] = []
let benchLeftArm: Image = null
let benchRightArm: Image = null
playersSprites = [
    assets.image`playerBrendan`,
    assets.image`playerCatherine`,
    assets.image`playerMitchell`,
    assets.image`playerGlenn`,
    assets.image`playerCourtney`,
    assets.image`playerTom`,
    assets.image`playerAbi`,
    assets.image`playerElsa`,
    assets.image`playerToby`
]
playersNames = [
    "Brendan",
    "Catherine",
    "Mitchell",
    "Glenn",
    "Courtney",
    "Tom",
    "Abi",
    "Elsa",
    "Tobi"
]
splash()
pauseUntil(() => controller.A.isPressed())
clearSplash()
playerSelector()


/**
 * Main game loop
 */
game.onUpdate(function () {
    if (gameSelected == "Bench Press") {
        benchLoop()
    } else if (gameSelected == "Back Squat") {
        squatLoop()
    }
})

/**
 * Manage P1 A button
 */
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (gameSelected == "Bench Press") {
        benchAButton()
    } else if (gameSelected == "Player Selector") {
        playerSelectorAButton()
    }
})

/**
 * Manage P1 B Button
 */
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (gameSelected == "Bench Press") {
        benchBButton()
    }
})

/**
 * Manage P1 left button
 */
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    if (gameSelected == "Player Selector") {
        playerSelectorLeftButton()
    }
})

/**
 * Manage P2 right button
 */
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    if (gameSelected == "Player Selector") {
        playerSelectorRightButton()
    }
})

/**
 * Intro screen
 */
function splash() {
    music.play(music.createSong(hex`003c000a641d0100001c00010a006400f401640000040000000000000000000000000005000004ff370000c8000413161a3b4b005700011a58006400011864009600011a9600c800021339c80090010413161b3713011f01011b20012c01011a2c014501011b45015e01011a5e0190010118900158020413181b34db01e701011be801f401011af4012602011b2602580201135802bc020411151839a302af020118b002bc020116bc02d50205181215183ad502ee020116ee02070301150703200301182003e8030413161a3b6b037703011a7803840301188403b603011ab603e803021339e803b0040413161b3733043f04011b40044c04011a4c046504011b65047e04011a7e04b0040118b00478050413181b34fb040705011b08051405011a14054605011b4605780501137805dc05051115180539c305cf050118d005dc050116dc05f5050618121518053af5050e0601160e06270601152706400601184006a4060513161a133b8b069706011a9806a4060118a406d606021a0ac506d606010cd6060807021339e706f806010e0807d0070513161b0f3753075f07011b60076c07011a6c078507011b85079e07011a9e07d0070118d00798080513181b0c341b082708011b28083408011a34086608011b56087708010e66089808011377089808010f98086009051115180e39e308ef080118f008fc080116fc08150903180c3a15092e0901162e09470901154709600901186009c4090513161a133bab09b709011ab809c4090118c409f609021a0ae609f709010cf609280a021339070a180a010e280af00a0513161b0f37730a7f0a011b800a8c0a011a8c0aa50a011ba50abe0a011abe0af00a0118f00ab80b0513181b0c343b0b470b011b480b540b011a540b860b011b760b970b010e860bb80b0113970bb80b010fb80b800c051115180e39030c0f0c0118100c1c0c01161c0c350c03180c3a350c4e0c01164e0c670c0115670c800c0118800ccb0c061613161a0a3bcb0cd70c0115d80ce40c0116e40c2f0d05181215183dfd0c160d0109160d2f0d010a2f0d3b0d02160c3c0d480d0118480d610d061a1115180e3e610d7a0d01187a0d930d0116930dac0d0115ac0dde0d061313161b0737de0d100e021b0f100e740e061a15181d0e36740e8d0e011a8d0ea60e011bb30ebf0e011abf0ed80e0118cc0ed80e0100d80ea00f061a15181e0d00e50e0a0f010d0a0f160f020d00170f3c0f010d3c0f480f020a00490f6e0f010a620f6e0f01006e0fa00f0103a00fb90f0e070e070e13161a1f13161a3b0b00b90fc50f03070e3bc60fd20f04070e3b00d20feb0f05070e3b0307eb0ff70f06070e1a3b0700f80f041003070e1804101d1006070e1a3b07001d10291004070e3b072a10361004070e3b0036104f1006070e133b03074f105b1005070e3b07005c10681002070e681081100b0f160f161b13161b03070081108d10040f1603078e109a10040f1603009a10b310050f16030307b310bf10060f161b030700c010cc10030f161acc10e510060f161b030700e510f110050f161a0307f210fe10040f160300fe101711060f161803030717112311050f1603070024113011020f16301149110d0c130c13181b1f13181b00070049115511040c13000756116211040c13000062117b11050c130003077b118711060c131b00070088119411030c131a9411ad11060c131b000700ad11b911040c130007ba11c611040c130000c611df11060c1313000307df11eb11050c13000700ec11f811020c13f81111120e050c050c1115181d11151839070011121d1204050c39071e122a1204050c39002a12431205050c39030743124f1206050c1839070050125c1203050c165c12751206050c183907007512811205050c16390782128e1204050c39008e12a71206050c15390307a712b31206050c18390700b412c01202050cc012d9120e070e070e13161a1f13161a3b0b00d912e51203070e3be612f21204070e3b00f2120b1305070e3b03070b13171306070e1a3b07001813241303070e1824133d1306070e1a3b07003d13491304070e3b074a13561304070e3b0056136f1306070e133b03076f137b1305070e3b07007c13881302070e8813a1130b0f160f161b13161b030700a113ad13040f160307ae13ba13040f160300ba13d313050f16030307d313df13060f161b030700e013ec13030f161aec130514060f161b03070005141114050f161a030712141e14040f1603001e143714060f161803030737144314050f1603070044145014020f16501469140d0c130c13181b1f13181b00070069147514040c13000776148214040c13000082149b14050c130003079b14a714060c131b000700a814b414030c131ab414cd14060c131b000700cd14d914040c130007da14e614040c130000e614ff14060c1313000307ff140b15050c130007000c151815020c13181531150e050c050c1115181d11151839070031153d1504050c39073e154a1504050c39004a15631505050c39030763156f1506050c1839070070157c1503050c167c15951506050c183907009515a11505050c163907a215ae1504050c3900ae15c71506050c15390307c715d31506050c18390700d415e01502050ce015121613070e13161a1f070e13161a1f1613161a3b0e00f9150516023b0706161216023b0012162b16033b03072b16371604153b07003816441601164416a81613050c1115181d050c1115181d1815181d3d16005d166916023d076a167616023d0076168f16033d03078f169b1604163d07009c16a8160118a816c1160e0a0a11161a1d221a11161a3e0e00c116da160409183d07ce16da160100da16f3160507163b0307f3160c170505153907000c1770170f0f161b0f161b1f221313161b0316002517311702030732173e170203003e177017041b0303075717701703030700701789170f0e151a0e151a1f211a15181f020e00891795170202079617a217020200a217bb1703020307bb17d41703020700d417ed1703020700ed17f917020207fa17061802020006181218041a02030713181f18011b1f182b18041a0207002c183818011838189c180f0e151a0e151a1e211a15181e02070051185d180202075e186a180202006a1883180302030783189c18030207009c18b51803020700b518c118020207c218ce18020200ce18e718020203e718f318040a0f0203f4180019030a0f030019191909070e13161a1f3b070019192519023b0726193219023b0032194b19033b03074b196419033b070064197d19033b07007d198919023b078a199619023b009619af19033b0307af19c819033b0700c819e119033b0700e119ed19023b07ee19fa19023b00fa19131a033b0307131a2c1a033b07002c1a5e1a04133b0700451a511a023b07521a5e1a023b005e1a901a04113b0307771a901a033b0700901ac21a040e3b0700a91ab51a023b07b61ac21a023b00c21af41a04163b0307db1af41a033b0700f41a261b04153b07000d1b191b023b071a1b261b023b00261b581b04113b03073f1b581b033b0700581b201c04133b0700711b7d1b023b077e1b8a1b023b008a1ba31b033b0307a31baf1b05050a3b0700b01bbc1b02050abc1b201c04113b0700d51be11b023b07e21bee1b023b00ee1b071c033b0307071c201c03390700201c521c08070e13161a3b0e00391c451c023b07461c521c023b00521c6b1c033b03076b1c841c041f3b0700841ca91c041f3b07009d1ca91c023b07aa1cb61c03213b00b61ccf1c033b0307cf1ce81c04223b0700e81c011d04213b0700011d1a1d031f3b070e1d1a1d023b001a1d4c1d041f3b0307331d4c1d033b07004c1d651d033b0700651d711d023b07721d7e1d023b007e1d971d033b0307971db01d03390700b01dc91d033b0700c91dd51d023b07d61de21d023b00e21dfb1d033b0307fb1d141e041f3b0700141e391e041f3b07002d1e391e023b073a1e461e03213b00461e5f1e033b03075f1e781e0622050a3e0700781e911e091f0c1313181b000700911eaa1e031f00079e1eaa1e020000aa1edc1e041f000307c31edc1e03000700dc1ef51e03000700f51e011f020007021f0e1f0200000e1f271f03000307271f401f05050c390700401f721f0c070e13161a1f13161a3b0b00591f651f023b07661f721f023b00721f8b1f033b03078b1fa41f041f3b0700a41fc91f041f3b0700bd1fc91f023b07ca1fd61f03213b00d61fef1f033b0307ef1f082004223b070008202d2004213b070021202d20023b072e203a20031f3b003a205f20041f3b030753206c20033b070060206c20011d6c20d020041a3b070085209120023b0792209e20023b009e20b720033b0307b720d0200405390700d020342109090e13161a1f3b0e00e920f520013bf6200221023b0002211b21033b03071b21342103223b00342155210c21090e15181d15181d3d0e004d215921013d56217721011f5a216621023d0066217f21033d030777219821011f7f219821023d009821b1210c1d0a1111161a11161a3e0e00b121ca21021d3ebe21ca21023e00ca21fc21041d3e0307e321fc21033e0700fc211522033e070015222122023e0722222e22023e002e224722033e03074722602203020700602279220b0f16161b1f13161b030e0079228522030a0f0386229222040a0f03009222ab22050f16030307ab22c422061f0a0f030700b822c422020a0fc422e922061f0f16030700dd22e922040a0f0307ea22f62205210a0f0300f6220f23050f160303070f23282306220a0f0307001c232823020a0f282349230921111815181d05070041234d23040a0f05074a236b23011d4e235a23040a0f05005a2373230511180503076b238c23011d73237f23050a0f05070080238c23020a0f8c23a523051118050700a523f023051d0a0f0507b223be23040a0f0500be23d723051118050307d723e323050a0f050700e423f023020a0ff02309240b0f1611161a11161a3e0e0009241524030a0f3e16242224040a0f3e0022243b24050f163e03073b24542406220a0f3e070048245424020a0f542486240c220e1315181d15181d3d16006d247924040a0f3d077a248624040a0f3d008624b82406240e133d03079f24ab24050a0f3d0700ac24b824020a0fb824dd240c22070e11161a11161a3b0e00d124dd2403050e3bde24ea240521050e3b00ea241c25061f070e3b030703250f2505050e3b070010251c2502050e1c2535250c050c11151a11151a392216003525412504050c390742254e2504050c39004e25672506050c392403076725732505050c3907007425802502050c802599250d0f160f13161a0f131603220e009925a525030f1603a625b225050f16032100b225cb25060f16031f0307cb25e425061f0f16030700d825e425020f16e4250926061f0f16030700fd250926040f1603070a26162605210f16030016262f26050f160303072f26482606220f160307003c264826020f1648266d260c220e15151a1d11151a02070061266d26040e1502076e267a2605210e1502007a269326050e150203079326ac26061f0e15020700a026ac26020e15ac26de26061f0e15020700c526d126040e150207d226de26040e150200de26f726061f0e15020307f7261027061f0e1502070004271027020e151027742703211100292742270a1115181d11151805030e362742270100422774270a1115181d11151805030e5b27742702070074278d270a1115181d1115180503168d27bf270a1115181d111518050316a627bf2703030700bf27d8270d181d2115181d11151805030e00d8270a2805181d21050e0a282328011f23283c28011f3c286e2801226e28a02801217b28a02801008728a028010ca028d2280f21070e070e13161a1f13161a3b0e00b928c52803070e3bc628d22804070e3b00d2286829061f070e3b0307eb28f72806070e1a3b0700f828042903070e1804291d2906070e1a3b07001d29292904070e3b072a29362904070e3b0036294f2906070e133b03074f295b2905070e3b07005c29682902070e682981290b0f160f161b13161b03070081298d29040f1603078e299a29040f1603009a29b329050f16030307b329bf29060f161b030700c029cc29030f161acc29e529060f161b030700e529f129050f161a0307f229fe29040f160300fe29172a060f1618030307172a232a050f16030700242a302a020f16302a492a0d0c130c13181b1f13181b000700492a552a040c130007562a622a040c130000622a7b2a050c130003077b2a872a060c131b000700882a942a030c131a942aad2a060c131b000700ad2ab92a040c130007ba2ac62a040c130000c62adf2a060c1313000307df2aeb2a050c13000700ec2af82a020c13f82a112b0e050c050c1115181d111518390700112b1d2b04050c39071e2b2a2b04050c39002a2b432b05050c390307432b5c2b0721050c18390700502b5c2b03050c165c2b8e2b0722050c18390700752b812b05050c163907822b8e2b04050c39008e2ba72b0722050c15390307a72bc02b0724050c18390700b42bc02b02050cc02bf22b0f21070e070e13161a1f13161a3b0e00d92be52b03070e3be62bf22b04070e3b00f22b882c061f070e3b03070b2c172c06070e1a3b0700182c242c03070e18242c3d2c06070e1a3b07003d2c492c04070e3b074a2c562c04070e3b00562c6f2c06070e133b03076f2c7b2c05070e3b07007c2c882c02070e882ca12c0b0f160f161b13161b030700a12cad2c040f160307ae2cba2c040f160300ba2cd32c050f16030307d32cdf2c060f161b030700e02cec2c030f161aec2c052d060f161b030700052d112d050f161a0307122d1e2d040f1603001e2d372d060f1618030307372d432d050f16030700442d502d020f16502d692d0d0c130c13181b1f13181b000700692d752d040c130007762d822d040c130000822d9b2d050c130003079b2da72d060c131b000700a82db42d030c131ab42dcd2d060c131b000700cd2dd92d040c130007da2de62d040c130000e62dff2d060c1313000307ff2d0b2e050c130007000c2e182e020c13182e312e0e050c050c1115181d111518390700312e3d2e04050c39073e2e4a2e04050c39004a2e632e05050c390307632e6f2e06050c18390700702e7c2e03050c167c2e952e06050c18390700952ea12e05050c163907a22eae2e04050c3900ae2ec72e06050c15390307c72ed32e06050c18390700d42ee02e02050ce02e122f09070e1613161a3b0e00f92e052f03163b07062f122f03153b00122f2b2f051f163b03072b2f442f033b0700442f692f041f3b07005d2f692f023b076a2f762f03213b00762f8f2f033b03078f2fa82f04223b0700a82fc12f04213b0700c12fda2f031f3b07ce2fda2f023b00da2f0c30041f3b0307f32f0c30033b07000c302530033b070025303130023b0732303e30023b003e305730033b0307573070300339070070308930033b070089309530023b079630a230023b00a230bb30033b0307bb30d430041f3b0700d430f930041f3b0700ed30f930023b07fa30063103213b0006311f31033b03071f3138310622050a3e070038315131091f0c1313181b00070051316a31031f00075e316a310200006a319c31041f00030783319c31030007009c31b53103000700b531c131020007c231ce31020000ce31e73103000307e731003205050c390700003232320c070e13161a1f13161a3b0b0019322532023b0726323232023b0032324b32033b03074b32643204223b07006432893204223b07007d328932023b078a32963203213b009632af32033b0307af32c83204223b0700c832fa3204213b0700e132ed32023b07ee32fa32023b00fa322c33041f3b030713332c33033b07002c335e33041f3b070045335133023b0752335e33023b005e337733033b03077733903304053907009033f43309090e13161a1f3b0e00a933b533013bb633c233023b00c233db33033b0307db33f43303223b00f43315340c21090e15181d15181d3d0e000d341934013d16342734011d1a342634023d0026343f34033d030737345834011d3f345834023d005834ee340c1d0a1111161a11161a3e0e0071347d34013e7e348a34023e008a34a334033e0307a334bc34033e0700bc34d534033e0700d534e134023e07e234ee34023e00ee34fa34041d3e0307fb340735011b07352035041a020700203539350b0f16161b1f13161b030e0039354535030a0f0346355235040a0f030052356b35050f160303076b358435061f0a0f03070078358435020a0f8435a935061f0f160307009d35a935040a0f0307aa35b63505210a0f0300b635cf35050f16030307cf35e83506220a0f030700dc35e835020a0fe83509360921111815181d05070001360d36040a0f05070a362b36011f0e361a36040a0f05001a3633360511180503072b364c36011d33363f36050a0f05070040364c36020a0f4c3665360511180507006536b036051d0a0f050772367e36040a0f05007e3697360511180503079736a336050a0f050700a436b036020a0fb036c9360b0f1611161a11161a3e0e00c936d536030a0f3ed636e236040a0f3e00e236fb36050f163e0307fb36143706220a0f3e070008371437020a0f143739370c220e1315181d15181d3d16002d373937040a0f3d073a37463705240a0f3d0046375f37050e133d03075f37783706260a0f3d07006c377837020a0f78379d370c24070e11161a11161a3b0e0091379d3703050e3b9e37aa370521050e3b00aa37dc37061f070e3b0307c337cf3705050e3b0700d037dc3702050edc37f5370c050c11151a11151a39221600f537013804050c390702380e3804050c39000e38273806050c392403072738333805050c3907003438403802050c403859380d0f160f13161a0f131603220e0059386538030f160366387238050f1603210072388b38060f16031f03078b38a43806220f160307009838a438020f16a438c93806220f16030700bd38c938040f160307ca38d63805240f160300d638ef38050f16030307ef38083906260f16030700fc380839020f1608393a390c260e15151a1d11151a02070021392d39040e1502072e393a39040e1502003a39533906240e1502030753396c3906240e1502070060396c39020e156c39853906240e1502070085399e3905220e15020792399e39040e1502009e39b73906220e15020307b739d03906210e15020700c439d039020e15d039e939021100e939023a0a1115181d11151805030ef639023a0100023a343a0a1115181d11151805030e1b3a343a020700343a4d3a0a1115181d1115180503164d3a7f3a0a1115181d111518050316663a7f3a030307007f3a983a0d181d2115181d11151805030e00983aca3a05181d21050eca3ae33a011fe33afc3a011ffc3a153b01222e3b603b01213b3b603b0100473b603b010c603b923b0f21070e070e13161a1f13161a3b0e00793b853b03070e3b863b923b04070e3b00923b283c061f070e3b0307ab3bb73b06070e1a3b0700b83bc43b03070e18c43bdd3b06070e1a3b0700dd3be93b04070e3b07ea3bf63b04070e3b00f63b0f3c06070e133b03070f3c1b3c05070e3b07001c3c283c02070e283c413c0b0f160f161b13161b030700413c4d3c040f1603074e3c5a3c040f1603005a3c733c050f16030307733c7f3c060f161b030700803c8c3c030f161a8c3ca53c060f161b030700a53cb13c050f161a0307b23cbe3c040f160300be3cd73c060f1618030307d73ce33c050f16030700e43cf03c020f16f03c093d0d0c130c13181b1f13181b000700093d153d040c130007163d223d040c130000223d3b3d050c130003073b3d473d060c131b000700483d543d030c131a543d6d3d060c131b0007006d3d793d040c1300077a3d863d040c130000863d9f3d060c13130003079f3dab3d050c13000700ac3db83d020c13b83dd13d0e050c050c1115181d111518390700d13ddd3d04050c3907de3dea3d04050c3900ea3d033e05050c390307033e1c3e0721050c18390700103e1c3e03050c161c3e4e3e0722050c18390700353e413e05050c163907423e4e3e04050c39004e3e673e0722050c15390307673e803e0724050c18390700743e803e02050c803eb23e0f21070e070e13161a1f13161a3b0e00993ea53e03070e3ba63eb23e04070e3b00b23e483f061f070e3b0307cb3ed73e06070e1a3b0700d83ee43e03070e18e43efd3e06070e1a3b0700fd3e093f04070e3b070a3f163f04070e3b00163f2f3f06070e133b03072f3f3b3f05070e3b07003c3f483f02070e483f613f0b0f160f161b13161b030700613f6d3f040f1603076e3f7a3f040f1603007a3f933f050f16030307933f9f3f060f161b030700a03fac3f030f161aac3fc53f060f161b030700c53fd13f050f161a0307d23fde3f040f160300de3ff73f060f1618030307f73f0340050f1603070004401040020f16104029400d0c130c13181b1f13181b00070029403540040c13000736404240040c13000042405b40050c130003075b406740060c131b00070068407440030c131a74408d40060c131b0007008d409940040c1300079a40a640040c130000a640bf40060c1313000307bf40cb40050c13000700cc40d840020c13d840f1400e050c050c1115181d111518390700f140fd4004050c3907fe400a4104050c39000a41234105050c39030723413c410721050c1839070030413c4103050c163c416e410722050c183907005541614105050c16390762416e4104050c39006e4187410722050c153903078741a0410724050c183907009441a04102050ca041d2411421070e13161a1f070e13161a1f1613161a3b0e00b941c541023b07c641d241023b00d2410442041f3b0307eb41f74104153b0700f841044201160442684215050c1115181d050c1115181d181115183d1d220e001d422942023d072a423642023d0036424f42053d1d2203074f425b4206163d1f2407005c4268420118684281420b0a0a1a11161a3e1d220e0081429a42050909183d078e429a4201009a42b342080707163b1a1f0307b342cc4206050515390700cc4230430f0f161b0f161b1f221313161b030e00e542f142020307f242fe42020300fe423043041b030307174330430303070030434943120e151a0e151a1f211a15181f021f21240e00494355430202075643624302020062437b43030203077b439443030207009443ad4303020700ad43b943020207ba43c643020200c643d243041a020307d343df43011bdf43eb43041a020700ec43f8430118f8432a440d260e151a1e211a151a1d02070005441144011b11441d44031a02071e442a44031802002a448e4405241a02030743445c44030207005c447544030207007544814402020782448e440202008e449f4404240a02039f44b0440122a744c044030a0203b044c1440121b444c0440103c04456450c22070e070e13161a1f3b1600d944f244010df244fe440103ff441845010318452445010324453d4501033d45494501034a455645010356456245010a63456f4501036f458845010a8845504605161a1d03008f459545010095459b4501009b45a1450100a145ba45020300a745ad450100ae45b4450100b445ba450100ba45c645020300c045c6450100c645df45020300cd45d3450100d345d9450100d945df450100df45eb45020300e545eb450100ec45f845020300f245f8450100f8450446020300fe450446010004461d460203000b461146010011461746010017461d4601001d4636460203002346294601002a463046010030463646010036464f460203003c464246010042464846010049464f4601004f4668460d0c13182724181b1f000c130e005b466746012768466e4603000c136e467446012774468046052724000c1381468d460627000c1303079346994601279a46a646072724000c130700a646b24603270c13b346b94605000c130700b946bf460127bf46cb46022724cc46d8460527000c1307d846de4603000c13de46e4460127e446f046072724000c130307f146fd460127fd46034705000c13070004470a4701270a4716470427240c1316472f470c0a111626161a203e0a1107002f473547043e0a11073c47484704263e0a1148475447053e0a11030761476d4706263e0a1107006e477a47020a117a478047053e0a11070086479247012693479f47043e0a1107a047a647033e0a11ac47b84706263e0a110307c547cb47053e0a110700d147dd4703260a11de47f7470c0f161b2713161b030f160700f747fd4704030f160703480f480427030f1610481c4805030f160307294835480627030f16070035484148020f164248484805030f1607004e485a4801275a48664804030f160767486d4803030f1673487f480627030f1603078c48a54805030f1607009948a548020f16a548be480d080f142420181b203c080f0e00b248be48022724be48c44805273c080f07c548cb48022724cb48d7480524203c080fd748e3480727243c080f0307e448ea480127ea48f048022724f048fc480724203c080f0700fd480949042622080f09493b490d080f142724181b203c080f16001649224902262222492e49032420072f493b4902221f3b4954490d070e132622161a1f3b070e0307484954490224205449604904221f070061496d49021f1b6d4986490d050c11201d14181d39050c1600864992490439050c0793499f490339050c9f49b8490539050c0307b849c449062039050c0700c549d1490320050cd149ea49062039050c0700ea49f249051f39050c07f249fa490120f749034a0339050cfb49034a011f034a1c4a061d39050c03071c4a354a061b39050c0700294a354a02050c354afd4a0c0a11161b11161a3e0a1107004e4a5a4a023e075b4a674a013e674a994a041a3e0307804a994a033e0700994acb4a04183e0700b24abe4a023e07bf4acb4a013ecb4afd4a041b3e0307e44afd4a033e0700fd4a164b0c0c131822181b1f000c131600164b224b04000c1307234b2f4b03000c132f4b3b4b0624000c1303073c4b484b011f484b544b0622000c130700554b614b031d0c13614b7a4b05000c1307006e4b7a4b01247a4b864b0522000c1307874b934b041f000c13934b9f4b0621000c130307a04bac4b011eac4bb84b061f000c130700b94bc54b031b0c13c54bde4b0c070e131e161a1f3b070e0700d24bde4b011dde4bea4b051b3b070e07eb4bf74b04183b070ef74b034c061d3b070e0307044c104c0118104c1c4c061b3b070e07001d4c294c031d070e294c424c053b070e0700424c4e4c043b070e074f4c5b4c033b070e5b4c744c053b070e0307744c8d4c053b070e0700814c8d4c02070e8d4ca64c0d0c13182724181b1f000c1307009a4ca64c0127a64cac4c04000c1307ac4cb24c0127b34cbf4c052724000c13bf4ccb4c0627000c130307d24cd84c0127d84ce44c072724000c130700e44cf04c03270c13f14cf74c05000c130700f74cfd4c0127fd4c094d0227240a4d164d0527000c1307164d1c4d03000c131d4d234d0127234d2f4d072724000c1303072f4d3b4d01273c4d424d05000c130700424d484d0127484d544d0427240c13554d6e4d0c0a111626161a203e0a1107006e4d744d043e0a11077a4d864d04263e0a11874d934d053e0a110307a04dac4d06263e0a110700ac4db84d020a11b84dbe4d053e0a110700c54dd14d0126d14ddd4d043e0a1107de4de44d033e0a11ea4df64d06263e0a110307034e094e053e0a110700104e1c4e03260a111c4e354e0c0f161b27161b1f030f160700354e3b4e04030f1607424e4e4e0427030f164e4e5a4e05030f160307674e734e0627030f160700744e804e020f16804e864e05030f1607008c4e984e0127994ea54e04030f1607a54eab4e03030f16b24ebe4e0627030f160307cb4ee44e05030f160700d74ee34e020f16e44efd4e0d080f142420181b203c080f0700f04efc4e022724fd4e034f05273c080f07034f094f022724094f154f0524203c080f164f224f0727243c080f0307224f284f0127284f2e4f0227242f4f3b4f0724203c080f07003b4f474f042624080f484f614f0d080f142724181b203c080f0700544f604f022622614f6d4f052420080f076d4f794f04221f080f7a4f934f0d070e132622161a1f3b080f0307864f924f022420934f9f4f06221f080f07009f4fab4f041f1b080fac4fc54f0d050c11201d14181d39050c0700c54fd14f0439050c07d14fdd4f0339050cde4ff74f0539050c0307f74f0350062039050c070003500f500320050c10502950062039050c070029503150051f39050c07315039500120355041500439050c0039504150011f42505b50061d39050c03075b507450061b39050c07006750735002050c74508d500c0a11162211161a3e0a1107008d509950043e0a11079950a550043e0a1100a650bf50053e0a110307bf50d850053e0a110700cb50d750020a11d8500a51061b3e0a110700f150fd50043e0a1107fd500951043e0a11000a513c51061d3e0a11030723513c51053e0a1107002f513b51020a113c5104520d0c13181d1f181b1f000c1307005551615102000761516d510200006e518751030003078751a05103000700a051b95103000700b951c551020007c551d151020000d251eb5103000307eb510452030007000452cc520d0e131a1f211a1e21020e1507001d5229520202072952355202020036524f52030203074f52685204240207006852cc52041f02070081528d520202078d52995201029a52b35203020307b352cc52020207cc52fe5208070e13161a3b1600fe521753010717532353021a0723532f5302180730536253021a07495355530107555361530107625394530213077b539453050e15020e009453c653080f1613161b031600c653df530107df53eb53021b07eb53f753021a07f8531154021b0711542a54021a071d54295401072a545c5402180743544f5401074f545b5401075c548e54080c1313181b0016008e54a7540107a754b354021b07b354bf54021a07c054f254021b07d954e5540107e554f1540107f25424550213070b552455050f16030e002455565508111811151805160056556f5501076f557b550218077b5587550216078855a155021807a155ba55021607ad55b9550107ba55d355021507d355ec55021807df55eb550107ec551e5609070e13161a3b0316001e56375602030737564356021a0743564f5602180750568256031a1f076956755601077156925601217556815601078256b456031303079256b35601229b56b456050e15020e00b456e6560a0f1613161b0327031600e656ff56020307ff560b57021b070b571757021a0718573157021b0731574a57021a073d57495701074a577c570318030763576f5701076f577b5701077c57ae57090c1313181b00031600ae57c757020307c757d357021b07d357df57021a07e0571258031b2407f9570558010701582258012605581158010712584458031303072258435801272b584458050f16030e00445876580a1118111518052603160076588f580203078f58a858032118079b58a758021607a858da580421182407c158da58021607cd58d9580107da58f3580422150307f3580c5903241807ff580b5901070c593e590a22070e160a0e133b0e003e59d459011f5759635902150363596f590216037059d45909090e180c11153d0e00bb59c759021603c759d359021803d459ed59080a1a0e11163e0e00ed59065a0509183d0e00065a1f5a0507163b0e001f5a385a050515390e00385a6a5a0a0f161b1313161b0316006a5a9c5a08220f161b1b030e009c5a645b0b210e151a1a15181f020e00575b635b0100645b2c5c0415181e0d705b955b010d895b955b0100965baf5b021f0da25bc75b010daf5bc85b011fbb5bc75b0100c85bfa5b02220cd45bf95b010ced5bf95b0100fa5b2c5c06210e151a030e2c5c5e5c0f21070e070e13161a1f13161a3b0e00455c515c03070e3b515c5d5c04070e3b005e5cf45c061f070e3b0307775c835c06070e1a3b0700835c8f5c03070e18905ca95c06070e1a3b0700a95cb55c04070e3b07b55cc15c04070e3b00c25cdb5c06070e133b0307db5ce75c05070e3b0700e75cf35c02070ef45c0d5d0b0f160f161b13161b0307000d5d195d040f160307195d255d040f160300265d3f5d050f160303073f5d4b5d060f161b0307004b5d575d030f161a585d715d060f161b030700715d7d5d050f161a03077d5d895d040f1603008a5da35d060f1618030307a35daf5d050f16030700af5dbb5d020f16bc5dd55d0d0c130c13181b1f13181b000700d55de15d040c130007e15ded5d040c130000ee5d075e050c13000307075e135e060c131b000700135e1f5e030c131a205e395e060c131b000700395e455e040c130007455e515e040c130000525e6b5e060c13130003076b5e775e050c13000700775e835e020c13845e9d5e0e050c050c1115181d1115183907009d5ea95e04050c3907a95eb55e04050c3900b65ecf5e05050c390307cf5ee85e0721050c18390700db5ee75e03050c16e85e1a5f0722050c18390700015f0d5f05050c1639070d5f195f04050c39001a5f335f0722050c15390307335f4c5f0724050c183907003f5f4b5f02050c4c5f7e5f0f21070e070e13161a1f13161a3b0e00655f715f03070e3b715f7d5f04070e3b007e5f1460061f070e3b0307975fa35f06070e1a3b0700a35faf5f03070e18b05fc95f06070e1a3b0700c95fd55f04070e3b07d55fe15f04070e3b00e25ffb5f06070e133b0307fb5f076005070e3b07000760136002070e14602d600b0f160f161b13161b0307002d603960040f16030739604560040f16030046605f60050f160303075f606b60060f161b0307006b607760030f161a78609160060f161b03070091609d60050f161a03079d60a960040f160300aa60c360060f1618030307c360cf60050f16030700cf60db60020f16dc60f5600d0c130c13181b1f13181b000700f5600161040c13000701610d61040c1300000e612761050c1300030727613361060c131b00070033613f61030c131a40615961060c131b00070059616561040c13000765617161040c13000072618b61060c13130003078b619761050c130007009761a361020c13a461bd610e050c050c1115181d111518390700bd61c96104050c3907c961d56104050c3900d661ef6105050c390307ef6108620721050c18390700fb61076203050c1608623a620722050c1839070021622d6205050c1639072d62396204050c39003a6253620722050c1539030753626c620724050c183907005f626b6202050c6c629e621421070e13161a1f070e13161a1f1613161a3b0e0085629162023b0791629d62023b009e62d062041f3b0307b762c36204153b0700c362cf620116d062346315050c1115181d050c1115181d181115183d1d220e00e962f562023d07f5620163023d0002631b63053d1d2203071b63276306163d1f24070027633363011834634d630b0a0a1a11161a3e1d220e004d636663050909183d0759636563010066637f63080707163b1a1f03077f639863060505153907009863fc630f0f161b0f161b1f221313161b030e00b163bd63020307bd63c963020300ca63fc63041b030307e363fc6303030700fc6315640103156421640e260e151a0e151a1a15181d020e003a644d640e260e151a0e151a1a15181d020e00606492640e260e151a0e151a1a15181d020e009264c464022403c464f6640e2407070e13161a1f13161a3b0e00dd64e96402073be964f56403073b00f6640f650524073b03070f6528650622071a3b07001b6527650207182865416505071a3b070041654d6503073b074d65596503073b005a6573650507133b030773657f6504073b07007f658b6501078c65a5650a0f0f161b13161b030700a565b165030f0307b165bd65030f0300be65d765040f030307d765f06506260f1b030700e365ef65020f1af065116606260f1b03070009661566040f1a030711663266012415662166030f030022663b66050f180303073266536601223b664766040f03070047665366010f54666d660d260c0c13181b1f13181b0007006d66866604240c000779668566030c00008666ea6605240c0003079f66ab66050c1b000700ab66b766020c1ab866d166050c1b000700d166dd66030c0007dd66e966030c0000ea66036706220c1300030703671c6705210c0007000f671b67010c1c6735670d05050c1115181d111518390700356741670305390741674d67030539004e6767670405390307676773670605183921070073677f6702051680679967060518392107009967a5670405163907a567b16703053900b267cb6706051539220307cb67d76706051839240700d767e3670105e467fd670e07070e13161a1f13161a3b210e00fd67096802073b0968156803073b0016682f6805073b1f03072f683b6805071a3b07003b6847680207184868616805071a3b070061686d6803073b076d68796803073b007a6893680507133b030793689f6804073b07009f68ab680107ac68c5680a0f0f161b13161b030700c568d168030f0307d168dd68030f0300de68f768040f030307f768106906220f1b03070003690f69020f1a1069356906220f1b03070029693569040f1a03073569416904220f030042695b69050f180303075b69746905220f03070067697369010f7469a6690d220c0c13181b1f13181b0007008d699969030c00079969a569030c0000a669bf6905220c000307bf69d86906240c1b000700cb69d769020c1ad869f169050c1b000700f169fd69030c0007fd69096a030c00000a6a236a050c13000307236a2f6a040c0007002f6a3b6a010c3c6a556a0d05050c1115181d111518390700556a616a03053907616a6d6a030539006e6a876a052405390307876aa06a06240518390700936a9f6a020516a06ad26a06240518390700b96ac56a0405163907c56ad16a03053900d26a046b061f0515390307eb6af76a050518390700f76a036b0105046b366b1424070e11161a1f070e11161a1f160a0e133b0e001d6b296b023b07296b356b023b00366b4f6b04243b03074f6b686b0522153b07005b6b676b0116686bcc6b14050c1115181d050c1115181d180c11153d220e00816b8d6b023d078d6b996b023d009a6bb36b043d220307b36bbf6b04163d0700bf6bcb6b0118cc6be56b0a0a0a1a0e11163e220e00e56bfe6b050909183d07f16bfd6b0100fe6b176c070707163b1f0307176c306c06050515390700306c946c0f0f161b0f161b1f221313161b030e00496c556c020307556c616c020300626c946c041b0303077b6c946c03030700946cad6c120e151a0e151a1e211a15181f021f21240e00ad6cb96c020207b96cc56c020200c66cdf6c03020307df6cf86c03020700f86c116d03020700116d1d6d0202071d6d296d0202002a6d5c6d03020307436d5c6d0207005c6d756d0103756d816d0e260e151a0e151a1a15181e020e009a6dad6d0e260e151a0e151a1a15181e020e00c06df26d0e260e151a0e151a1a15181e020e00f26d246e022403246e566e0e2407070e13161a1f13161a3b0e003d6e496e02073b496e556e03073b00566e6f6e0524073b03076f6e886e0622071a3b07007b6e876e020718886ea16e05071a3b0700a16ead6e03073b07ad6eb96e03073b00ba6ed36e0507133b0307d36edf6e04073b0700df6eeb6e0107ec6e056f0a0f0f161b13161b030700056f116f030f0307116f1d6f030f03001e6f376f040f030307376f506f06260f1b030700436f4f6f020f1a506f716f06260f1b030700696f756f040f1a0307716f926f0124756f816f030f0300826f9b6f050f18030307926fb36f01229b6fa76f040f030700a76fb36f010f`), music.PlaybackMode.LoopingInBackground)
    splashTidal = sprites.create(assets.image`tidal`, SpriteKind.Splash)
    splashTidal.setScale(0.25, ScaleAnchor.Middle)
    splashTidal.setPosition(80, 64)
    splashTitle = sprites.create(assets.image`title-1`, SpriteKind.Splash)
    splashTitle.setPosition(80, 16)
    splashTitleAnimation = animation.createAnimation(ActionKind.Walking, 500)
    splashTitleAnimation.addAnimationFrame(assets.image`title-1`)
    splashTitleAnimation.addAnimationFrame(assets.image`title-2`)
    animation.attachAnimation(splashTitle, splashTitleAnimation)
    animation.setAction(splashTitle, ActionKind.Walking)
    splashStart = textsprite.create(" To Start", 0, 8)
    splashStart.setMaxFontHeight(10)
    splashStart.setIcon(assets.image`abutton`)
    splashStart.setPosition(80, 104)
}

/**
 * Clean up intro screen
 */
function clearSplash() {
    music.stopAllSounds()
    music.play(music.melodyPlayable(music.baDing), music.PlaybackMode.UntilDone)
    sprites.destroyAllSpritesOfKind(SpriteKind.Splash, effects.hearts, 500)
    sprites.destroy(splashStart, effects.hearts, 500)
    pause(500)
}

/**
 * Choose your player screen
 */
function playerSelector() {
    scene.setBackgroundColor(8)
    gameSelected = "Player Selector"
    playerSelectorTitle = textsprite.create("<- Choose Your Athlete ->", 0, 1)
    playerSelectorTitle.setKind(SpriteKind.Player)
    playerSelectorTitle.setPosition(80, 20)
    playerSelectorCurrent = 0
    playerSelectorSprite = sprites.create(assets.image`blank16x16`, SpriteKind.Player)
    playerSelectorName = textsprite.create("")
    playerSelectorName.setPosition(80, 100)
    playerSelectorName.setKind(SpriteKind.Player)
    playerSelectorDrawCurrent()
}

/**
 * Choose your player draw current player
 */
function playerSelectorDrawCurrent() {
    playerSelectorSprite.setImage(playersSprites[playerSelectorCurrent])
    playerSelectorSprite.setScale(0.5, ScaleAnchor.Middle)
    playerSelectorSprite.setPosition(80, 60)
    playerSelectorName.setText(playersNames[playerSelectorCurrent])
    playerSelectorName.setPosition(80, 100)
}

/**
 * Choose your player right button event
 */
function playerSelectorRightButton() {
    playerSelectorCurrent += 1
    if (playerSelectorCurrent >= playersSprites.length) {
        playerSelectorCurrent = 0
    }
    music.play(music.melodyPlayable(music.magicWand), music.PlaybackMode.InBackground)
    playerSelectorDrawCurrent()
}

/**
 * Choose your player left button event
 */
function playerSelectorLeftButton() {
    playerSelectorCurrent += -1
    if (playerSelectorCurrent < 0) {
        playerSelectorCurrent = playersSprites.length - 1
    }
    music.play(music.melodyPlayable(music.magicWand), music.PlaybackMode.InBackground)
    playerSelectorDrawCurrent()
}

/**
 * Choose your player A button event
 */
function playerSelectorAButton() {
    music.play(music.melodyPlayable(music.powerUp), music.PlaybackMode.UntilDone)
    sprites.destroyAllSpritesOfKind(SpriteKind.Player)
    scene.setBackgroundColor(15)
    gameSelected = "Game Selector"
    // Do in timer to not carry a button event over to game selector screen
    timer.background(function () {
        callGameSelector()
    })
}

/**
 * Drawe game selector screen
 */
function callGameSelector() {
    scene.setBackgroundImage(assets.image`blank160x120`)
    gameSelectorSprite = miniMenu.createMenu(
        miniMenu.createMenuItem("Bench Press", assets.image`gameBench`),
        miniMenu.createMenuItem("Back Squat", assets.image`gameSquat`),
        miniMenu.createMenuItem("Deadlift", assets.image`gameDeadlift`),
        miniMenu.createMenuItem("")
    )
    gameSelectorSprite.setDimensions(140, 90)
    gameSelectorSprite.setTitle("Pick Your Lift")
    gameSelectorSprite.setStyleProperty(miniMenu.StyleKind.Default, miniMenu.StyleProperty.Background, 9)
    gameSelectorSprite.setStyleProperty(miniMenu.StyleKind.Selected, miniMenu.StyleProperty.Background, 8)
    gameSelectorSprite.setPosition(80, 60)
    gameSelectorSprite.setFrame(assets.image`gameMenuBack`)
    gameSelectorSprite.onButtonPressed(controller.A, function (selection, selectedIndex) {
        // look for a button release to avoice carrying the a button event forward
        pauseUntil(() => !(controller.A.isPressed()))
        gameSelected = selection
        gameSelectorSprite.close()
        if (selectedIndex == 0) {
            benchStart()
        } else if (selectedIndex == 1) {
            squatStart()
        } else if (selectedIndex == 2) {
            deadliftStart()
        }
    })
}



/**
 * Bench game startup
 */
function benchStart() {
    music.play(music.createSong(assets.song`benchTunes`), music.PlaybackMode.LoopingInBackground)
    scene.setBackgroundImage(assets.image`benchBackground`)
    benchState = "racked"
    benchBarTop = 35
    benchBarMidBottom = 50
    benchBarMidTop = 40
    benchBarBottom = 60
    benchLevel = 1
    benchPlayerSprite = sprites.create(assets.image`benchPlayer`, SpriteKind.Player)
    benchPlayerSprite.setPosition(80, 70)
    benchPlayerSprite.z = 10
    benchLeftArmSprite = sprites.create(assets.image`blank10x10`, SpriteKind.Player)
    benchLeftArmSprite.setPosition(65, 70)
    benchLeftArmSprite.z = 0
    benchRightArmSprite = sprites.create(assets.image`blank10x10`, SpriteKind.Player)
    benchRightArmSprite.setPosition(90, 70)
    benchRightArmSprite.z = 0
    benchStatusBar = statusbars.create(60, 4, StatusBarKind.Health)
    benchStatusBar.value = 100
    benchStatusBar.positionDirection(CollisionDirection.Bottom)
    benchStatusBar.setOffsetPadding(0, 20)
    benchStatusBar.attachToSprite(benchPlayerSprite)
    benchRightSprite = sprites.create(assets.image`rightHand`, SpriteKind.benchBar)
    benchRightSprite.setPosition(110, 40)
    benchLeftSprite = sprites.create(assets.image`leftHand`, SpriteKind.benchBar)
    benchLeftSprite.setPosition(50, 40)
    benchBarSprite = sprites.create(assets.image`benchBar`, SpriteKind.benchBar)
    benchBarSprite.setPosition(80, 40)
    benchBarSprite.z = -10
    benchHudLevel = textsprite.create("Entering Level", 15, 0)
    benchHudLevel.setPosition(50, 110)
    benchHudWeight = textsprite.create("Weight ?", 15, 0)
    benchHudWeight.setPosition(100, 110)
    benchHudAction = textsprite.create("Ready?", 15, 0)
    benchHudAction.setPosition(80, 10)
}

/** 
 * Bench game game loop
 */
function benchLoop() {
    if (!(benchLeftSprite) || !(benchRightSprite)) {
        return
    }
    benchGameLoopCurrent = game.runtime() - benchGameLoopLast
    benchGameLoopHealthCurrent = game.runtime() - benchGameLoopHealthLast
    benchBarHeight = (benchLeftSprite.y + benchRightSprite.y) / 2
    benchCurrentWeight = 65 + benchLevel * 10
    if (benchState == "press") {
        if (benchGameLoopHealthCurrent >= 150) {
            benchGameLoopHealthLast = game.runtime()
            benchStatusBar.value += -1
            if (benchStatusBar.value == 0) {
                music.stopAllSounds()
                gameOver()
            }
        }
        if (benchGameLoopCurrent >= 1000) {
            benchGameLoopLast = game.runtime()
            if (benchLeftSprite.y <= benchBarTop && benchRightSprite.y <= benchBarTop) {
                benchState = "pressed"
                benchRightSprite.y = benchBarTop
                benchLeftSprite.y = benchBarTop
                effects.clearParticles(benchPlayerSprite)
                benchUpdateHud()
            }
            benchGravity = benchCurrentWeight * 0.01
            // Mid point stick
            if (benchBarHeight > benchBarMidTop && benchBarHeight < benchBarMidBottom) {
                benchGravity = benchGravity * 1.5
                benchPlayerSprite.startEffect(effects.spray)
            }
            benchTilt = Math.abs(benchLeftSprite.y - benchRightSprite.y)
            benchMaxTilt = 20 - benchCurrentWeight / 20
            if (benchTilt > benchMaxTilt) {
                // Severe penalty for uneven lifting
                benchGravity = benchGravity * 2
                benchPlayerSprite.startEffect(effects.spray)
            }
            if (benchLeftSprite.y < benchBarBottom) {
                benchLeftSprite.y = benchLeftSprite.y + benchGravity
            } else {
                benchLeftSprite.y = benchBarBottom
            }
            if (benchRightSprite.y < benchBarBottom) {
                benchRightSprite.y = benchRightSprite.y + benchGravity
            } else {
                benchRightSprite.y = benchBarBottom
            }
        }
    } else if (benchState == "decend") {
        benchLeftSprite.vy = 60
        benchRightSprite.vy = 60
        if (benchBarHeight >= benchBarBottom) {
            benchLeftSprite.vy = 0
            benchLeftSprite.y = benchBarBottom
            benchRightSprite.vy = 0
            benchRightSprite.y = benchBarBottom
            benchState = "press"
        }
    } else {

    }
    benchUpdateBar()
    benchUpdateArms()
    benchUpdateHud()
}

/**
 * Draw the bench bar height and rotation
 */
function benchUpdateBar() {
    benchBarSprite.y = (benchLeftSprite.y + benchRightSprite.y) / 2
    transformSprites.rotateSprite(benchBarSprite, benchRightSprite.y - benchLeftSprite.y)
}

/**
 * Draw those elasta arms running from body up to bar
 */
function benchUpdateArms() {
    benchLeftArm = image.create(15, benchPlayerSprite.y - benchBarSprite.y)
    benchLeftArm.drawLine(0, 0, image.getDimension(benchLeftArm, image.Dimension.Width), image.getDimension(benchLeftArm, image.Dimension.Height), 13)
    benchLeftArm.drawLine(1, 0, image.getDimension(benchLeftArm, image.Dimension.Width) + 1, image.getDimension(benchLeftArm, image.Dimension.Height) + 1, 13)
    benchLeftArm.drawLine(2, 0, image.getDimension(benchLeftArm, image.Dimension.Width) + 2, image.getDimension(benchLeftArm, image.Dimension.Height) + 2, 13)
    benchLeftArmSprite.setImage(benchLeftArm)
    benchLeftArmSprite.top = benchBarSprite.bottom
    benchRightArm = image.create(15, benchPlayerSprite.y - benchBarSprite.y)
    benchRightArm.drawLine(image.getDimension(benchRightArm, image.Dimension.Width), 0, 0, image.getDimension(benchRightArm, image.Dimension.Height), 13)
    benchRightArm.drawLine(image.getDimension(benchRightArm, image.Dimension.Width) + 1, 0, 0, image.getDimension(benchRightArm, image.Dimension.Height) + 1, 13)
    benchRightArm.drawLine(image.getDimension(benchRightArm, image.Dimension.Width) + 2, 0, 0, image.getDimension(benchRightArm, image.Dimension.Height) + 2, 13)
    benchRightArmSprite.setImage(benchRightArm)
    benchRightArmSprite.top = benchBarSprite.bottom
}

/**
 * Draw bench heads up display
 */
function benchUpdateHud() {
    benchHudLevel.setText("Level " + benchLevel)
    benchHudWeight.setText("Weight " + benchCurrentWeight + "LBs")
    if (benchState == "racked") {
        benchHudAction.setText("Press A To Unrack")
        benchHudAction.setPosition(80, 10)
    } else if (benchState == "press") {
        if (benchTilt > benchMaxTilt) {
            benchHudAction.setText("UNEVEN!!!!")
            benchHudAction.setPosition(80, 10)
        } else {
            benchHudAction.setText("PUSH!! (A+B)")
            benchHudAction.setPosition(80, 10)
        }
    } else if (benchState == "unracked") {
        benchHudAction.setText("Press A To Descend")
        benchHudAction.setPosition(80, 10)
    } else if (benchState == "unracked") {
        benchHudAction.setText("DESCENDING!")
        benchHudAction.setPosition(80, 10)
    } else if (benchState == "pressed") {
        benchHudAction.setText("Press A to Re-Rack")
        benchHudAction.setPosition(80, 10)
    } else if (benchState == "done") {
        music.play(music.stringPlayable("E D G F B A C5 B ", 260), music.PlaybackMode.UntilDone)
        info.changeScoreBy(benchCurrentWeight)
        game.splash("An Easy " + benchCurrentWeight + "LBs!", "Lets go for " + (benchCurrentWeight + 10) + "LBs")
        benchState = "racked"
        benchLevel += 1
        benchStatusBar.value = 100
    }
}

/**
 * Bench A button event
 */
function benchAButton() {
    if (benchState == "press") {
        if (benchLeftSprite.y > benchBarTop) {
            benchLeftSprite.y += -1
        }
    } else if (benchState == "racked") {
        benchState = "unracked"
        music.play(music.createSoundEffect(WaveShape.Noise, 3900, 3500, 255, 0, 10, SoundExpressionEffect.None, InterpolationCurve.Linear), music.PlaybackMode.InBackground)
        benchLeftSprite.y += -5
        benchRightSprite.y += -5
    } else if (benchState == "unracked") {
        benchState = "decend"
    } else if (benchState == "pressed") {
        benchState = "done"
        music.play(music.createSoundEffect(WaveShape.Noise, 3900, 3500, 255, 0, 10, SoundExpressionEffect.None, InterpolationCurve.Linear), music.PlaybackMode.InBackground)
        benchLeftSprite.y += 5
        benchRightSprite.y += 5
    } else {

    }
}


/**
 * Bench B button event
 */
function benchBButton() {
    if (benchState == "press") {
        if (benchRightSprite.y > benchBarTop) {
            benchRightSprite.y += -1
        }
    }
}


/**
 * Squat game startup
 */
function squatStart() {

}

/**
 * Squat game loop
 */
function squatLoop() {

}


/**
 * Start deadlift game
 */
function deadliftStart() {
    scene.setBackgroundImage(assets.image`deadliftHolder`)
    music.play(music.melodyPlayable(music.magicWand), music.PlaybackMode.InBackground)
    pauseUntil(() => controller.A.isPressed())
    callGameSelector()
}




/**
 * Whaaa waa waa
 */
function gameOver() {
    gameSelected = "gameOver"
    sprites.destroyAllSpritesOfKind(SpriteKind.benchBar)
    sprites.destroyAllSpritesOfKind(SpriteKind.Player)
    sprites.destroyAllSpritesOfKind(SpriteKind.Text)
    scene.setBackgroundImage(img`
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        `)
    scene.setBackgroundColor(8)
    playerSelectorSprite = sprites.create(playersSprites[playerSelectorCurrent], SpriteKind.Player)
    playerSelectorSprite.y = 40
    playerSelectorSprite.setScale(0.5, ScaleAnchor.Middle)
    playerSelectorSprite.startEffect(effects.confetti, 5000)
    animation.runMovementAnimation(
        playerSelectorSprite,
        animation.animationPresets(animation.bobbing),
        1000,
        true
    )
    story.startCutscene(function () {
        if (info.score() == 0) {
            winMessage = "Ouch!  You can do better then that!"
        } else {
            if (info.score() > info.highScore()) {
                winMessage = "Heck ya! " + info.score() + " points!  New high score!!!!"
            } else {
                winMessage = "Heck ya! " + info.score() + " points!  Hit the gym to level up."
            }
        }
        story.printCharacterText(winMessage, playersNames[playerSelectorCurrent])
    })
    timer.after(5000, function () {
        if (info.score() == 0) {
            game.gameOver(false)
        } else {
            game.gameOver(true)
        }
    })
}



